#:kivy 2.3.0
#:import Factory kivy.factory.Factory
#TODO: fix line borders being buggy and dissapearing when scaling the menu

<Button>:
    canvas.before:
        Color:
            rgba: (1, 1, 1, 1)
        Line:
            rectangle: self.x, self.y, self.width, self.height + 1
    background_normal:""
    background_down: ""
    background_color: (0, 0, 0, 1)

<TextInput>:
    canvas.before:
        Color:
            rgba: (1, 1, 1, 1)
        Line:
            rectangle: self.x, self.y, self.width, self.height
    cursor_color: (1, 1, 1, 1)
    foreground_color: (1, 1, 1, 1)
    background_color: (0, 0, 0, 1)
    background_normal:""
    selection_color: (1, 0, 0, 0.2)

<QuitPopup@Popup>:
    title: "[ ! ] Alert"
    size_hint: 0.5, 0.5
    background_normal:""
    background_color: (0, 0, 0, 1)
    foreground_color: (1, 1, 1, 1)
    separator_color: (1, 0, 0, 1)
    StackLayout:
        spacing: 28  # between Buttons
        Label:
            canvas.before:
                Color:
                    rgba: (1, 1, 1, 1)
                Line:
                    rectangle: self.x, self.y, self.width, self.height + 1
            text: "Are you sure you want to close the program? \n(all unsaved changes will be lost)"
            size_hint:1,.8
        Button:
            text: "Yes"
            size_hint:.5,.2
            on_release: app.stop()
        
        Button:
            text: "Cancel"
            size_hint:.5,.2
            on_release: root.dismiss()

<SlLayout>:
    text: text
    StackLayout:
        size: root.width, root.height
        Button:
            text:"File"
            size_hint:.1,.05
            on_press: root.file_button()
        Button:
            text:"[u]S[/u]ave"
            markup:True
            size_hint:.1,.05
            on_press: root.save_file()
        Button:
            text:"[u]O[/u]pen"
            markup:True
            size_hint:.1,.05
            on_press: root.open_file()
        Button:
            text:"Open dir"
            size_hint:.1,.05
            on_press: root.open_directory()
        Button:
            text:"Save as"
            size_hint:.1,.05
            on_press: root.save_as_file()
        Button:
            text:"[u]Q[/u]uit"
            markup:True
            size_hint:.1,.05
            on_press: Factory.QuitPopup().open()
        TextInput:
            id:text
            auto_indent:True
            focus:True
            size_hint:1.0,.85
        TextInput:
            id: filename_input
            text: "No file currently open"
            text_size: self.size
            multiline: False
            on_text_validate: root.rename_file()
            halign: "left"
            valign: "center"
            size_hint:.5,.05
        Label:
            canvas.before:
                Color:
                    rgba: (1, 1, 1, 1)
                Line:
                    rectangle: self.x, self.y, self.width, self.height
            id: directory_label
            text: "No open directory"
            text_size: self.size
            halign: "left"
            valign: "center"
            size_hint:.5,.05
        Label:
            id: info_label
            text: "..."
            text_size: self.size
            halign: "left"
            valign: "center"
            size_hint:1,.05